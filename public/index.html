<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        
        fetch("http://localhost:3000/api")
            .then(res=>res.json())
                .then(obj=>{
                    const html=obj.data.map(item=>{
                        return `
                        <article data-id="${item._id}"">
                            <div style="display: flex; justify-content: space-around; width: 300px; height: 100px; border: 1px solid grey;">
                                <span>${item.title}-</span>
                                <span>${item.author}</span>  
                            </div>
                            <button 
                            onClick
                            style="width:300px;padding:10px;background-color: orange;color:whitesmoke">
                                Delete
                            </button>  
                        </article> `
                    }).join("")

                    document.querySelector("main").innerHTML=html
                    
                    addEventListener("click",e=>{
                    if(e.target.matches("button")){
                        const article=e.target.closest("article")
                        const id=article.dataset.id
                        fetch(`http://localhost:3000/api/${id}`,{
                            method:"DELETE"
                        })
                        .then(res=>res)
                            .then(data=>{
                                if(data.ok){
                                    article.remove()
                                }
                            })
                    }
                })
                })
                
    </script>
    <main style="display:flex;flex-direction: column;align-items: center;justify-content: center;border:1px solid grey">
       
    </main>
    <button style="margin:1rem;width:100%;padding:10px;background-color: rgb(213, 14, 124);color:whitesmoke">
        Add new Card
    </button> 
</body>
</html>

